{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Sergej\\\\Desktop\\\\Projects\\\\AccnCalProject\\\\calcompass-fe\\\\cal-compass\\\\components\\\\headersParts\\\\headers.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport { AppBar, Toolbar, IconButton, Typography, Badge, Button } from '@material-ui/core/';\nimport { Menu as MenuIcon, AccountCircle, Notifications as NotificationsIcon, MoreVert as MoreIcon } from '@material-ui/icons';\nimport styleMaker from './headersStyleMaker';\nimport MenuTheme from './menuTheme';\nimport MobileMenu from './mobileMenu';\nimport DesktopMenu from './desktopMenu';\nimport NotificationMenu from './notificationMenu';\nimport Search from './search';\nvar useStyles = makeStyles(styleMaker);\nexport default function PrimarySearchAppBar() {\n  _s();\n\n  /**\r\n   * @TODO: the user data and headersMetadat should be retrieved through an API call. \r\n   * Eventually they should be brought to getStaticProps or getServerSideProps async functions\r\n   * for data fecthing. \r\n   */\n  var _React$useState = React.useState(null),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      userData = _React$useState2[0],\n      setUserData = _React$useState2[1];\n\n  var _React$useState3 = React.useState(null),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      headersMetadata = _React$useState4[0],\n      setHeadersMetadata = _React$useState4[1];\n\n  var _React$useState5 = React.useState(Boolean(userData)),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      loggedIn = _React$useState6[0],\n      setLoggedIn = _React$useState6[1];\n\n  var _React$useState7 = React.useState(null),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      clickedLoggedOut = _React$useState8[0],\n      setClickedLoggedOut = _React$useState8[1]; // @TODO - Bring the data fetching to getStaticProps or getServerProps instead of hardcoding them here.\n\n\n  !userData && !clickedLoggedOut ? fetch('/api/users?id=foo').then(function (res) {\n    return res.json();\n  }).then(function (res) {\n    setUserData(res);\n    setLoggedIn(Boolean(res));\n  })[\"catch\"](function (e) {\n    return console.log(e);\n  }) : ''; // @TODO - Delete it once real API is live and adapt code to retrieve information from the API\n\n  !headersMetadata ? fetch('/api/loadHeadersMetadata').then(function (res) {\n    return res.json();\n  }).then(function (res) {\n    console.log(res);\n    setHeadersMetadata(res);\n  })[\"catch\"](function (e) {\n    return console.log(e);\n  }) : '';\n\n  var _React$useState9 = React.useState(null),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      anchorEl = _React$useState10[0],\n      setAnchorEl = _React$useState10[1];\n\n  var _React$useState11 = React.useState(null),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      mobileMoreAnchorEl = _React$useState12[0],\n      setMobileMoreAnchorEl = _React$useState12[1];\n\n  var _React$useState13 = React.useState(null),\n      _React$useState14 = _slicedToArray(_React$useState13, 2),\n      notificationAnchorEl = _React$useState14[0],\n      setNotificationAnchorEl = _React$useState14[1];\n\n  var classes = useStyles();\n  var isMenuOpen = Boolean(anchorEl);\n  var isMobileMenuOpen = Boolean(mobileMoreAnchorEl);\n  var isNotificationMenuOpen = Boolean(notificationAnchorEl);\n\n  var handleProfileMenuOpen = function handleProfileMenuOpen(e) {\n    return setAnchorEl(e.currentTarget);\n  };\n\n  var handleMobileMenuClose = function handleMobileMenuClose() {\n    return setMobileMoreAnchorEl(null);\n  };\n\n  var handleNotificationMenuClose = function handleNotificationMenuClose() {\n    return setNotificationAnchorEl(null);\n  };\n\n  var handleMenuClose = function handleMenuClose(e) {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n    handleNotificationMenuClose();\n    var id = e.currentTarget.id;\n\n    if (id === 'signout') {\n      console.log(id);\n      setClickedLoggedOut(true);\n      setUserData(null);\n      setLoggedIn(null);\n    }\n  };\n\n  var handleMobileMenuOpen = function handleMobileMenuOpen(e) {\n    return setMobileMoreAnchorEl(e.currentTarget);\n  };\n\n  var handleNotificationMenuOpen = function handleNotificationMenuOpen(e) {\n    return setNotificationAnchorEl(e.currentTarget);\n  };\n\n  var notifications = userData ? Array.isArray(userData.notifications) ? userData.notifications : [] : [];\n  var notificationNumber = notifications ? notifications.filter(function (_ref) {\n    var visited = _ref.visited;\n    return !visited;\n  }).length : 0;\n  var menuId = 'account-menu';\n\n  var renderMenu = /*#__PURE__*/_jsxDEV(DesktopMenu, {\n    anchorEl: anchorEl,\n    menuId: menuId,\n    isMenuOpen: isMenuOpen,\n    handleMenuClose: handleMenuClose\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n\n  var mobileMenuId = 'account-menu';\n\n  var renderMobileMenu = /*#__PURE__*/_jsxDEV(MobileMenu, {\n    mobileMoreAnchorEl: mobileMoreAnchorEl,\n    mobileMenuId: mobileMenuId,\n    isMobileMenuOpen: isMobileMenuOpen,\n    handleMobileMenuClose: handleMobileMenuClose,\n    handleProfileMenuOpen: handleProfileMenuOpen,\n    notificationNumber: notificationNumber\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n\n  var notificationMenuId = 'notification-menu';\n\n  var renderNotificationMenu = /*#__PURE__*/_jsxDEV(NotificationMenu, {\n    anchorEl: notificationAnchorEl,\n    menuId: notificationMenuId,\n    isMenuOpen: isNotificationMenuOpen,\n    handleMenuClose: handleNotificationMenuClose,\n    userData: userData ? userData : '' // Defaults it to an empty string.\n    ,\n    setUserData: setUserData\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 35\n  }, this);\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.grow,\n    children: [/*#__PURE__*/_jsxDEV(AppBar, {\n      position: \"static\",\n      className: classes.appBar,\n      children: /*#__PURE__*/_jsxDEV(Toolbar, {\n        children: [/*#__PURE__*/_jsxDEV(IconButton, {\n          edge: \"start\",\n          className: classes.menuButton,\n          color: \"inherit\",\n          \"aria-label\": \"open drawer\",\n          children: /*#__PURE__*/_jsxDEV(MenuIcon, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Typography, {\n          className: classes.title,\n          variant: \"h6\",\n          noWrap: true,\n          children: headersMetadata ? headersMetadata.appName ? headersMetadata.appName : 'calcompas' : 'calcompass'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this), loggedIn ? /*#__PURE__*/_jsxDEV(Search, {\n          userData: userData ? userData : '',\n          classes: classes\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 21\n        }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.grow\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }, this), loggedIn ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.sectionDesktop,\n          children: [/*#__PURE__*/_jsxDEV(IconButton, {\n            \"aria-label\": \"show \".concat(notificationNumber, \" new notifications\"),\n            \"aria-controls\": notificationMenuId,\n            \"aria-haspopup\": \"true\",\n            variant: \"contained\",\n            onClick: handleNotificationMenuOpen,\n            color: \"inherit\",\n            children: /*#__PURE__*/_jsxDEV(Badge, {\n              badgeContent: notificationNumber,\n              color: \"secondary\",\n              children: /*#__PURE__*/_jsxDEV(NotificationsIcon, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(IconButton, {\n            edge: \"end\",\n            \"aria-label\": \"account of current user\",\n            \"aria-controls\": menuId,\n            \"aria-haspopup\": \"true\",\n            variant: \"contained\",\n            onClick: handleProfileMenuOpen,\n            color: \"inherit\",\n            children: /*#__PURE__*/_jsxDEV(AccountCircle, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 153,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this) : '', loggedIn ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.sectionMobile,\n          children: /*#__PURE__*/_jsxDEV(IconButton, {\n            \"aria-label\": \"show more\",\n            \"aria-controls\": mobileMenuId,\n            \"aria-haspopup\": \"true\",\n            onClick: handleMobileMenuOpen,\n            color: \"inherit\",\n            children: /*#__PURE__*/_jsxDEV(MoreIcon, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 11\n        }, this) : '', !loggedIn ? /*#__PURE__*/_jsxDEV(Button, {\n          color: \"inherit\",\n          onClick: function onClick() {\n            return setClickedLoggedOut(null);\n          },\n          children: \"LOGIN\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 24\n        }, this) : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), loggedIn ? /*#__PURE__*/_jsxDEV(MenuTheme, {\n      children: [renderMobileMenu, renderMenu, renderNotificationMenu]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this) : '']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 5\n  }, this);\n}\n\n_s(PrimarySearchAppBar, \"+YBcm1Mvc/ZN1Fvn8XfNWz1O2FI=\", false, function () {\n  return [useStyles];\n});\n\n_c = PrimarySearchAppBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"PrimarySearchAppBar\");","map":{"version":3,"sources":["C:/Users/Sergej/Desktop/Projects/AccnCalProject/calcompass-fe/cal-compass/components/headersParts/headers.js"],"names":["React","makeStyles","AppBar","Toolbar","IconButton","Typography","Badge","Button","Menu","MenuIcon","AccountCircle","Notifications","NotificationsIcon","MoreVert","MoreIcon","styleMaker","MenuTheme","MobileMenu","DesktopMenu","NotificationMenu","Search","useStyles","PrimarySearchAppBar","useState","userData","setUserData","headersMetadata","setHeadersMetadata","Boolean","loggedIn","setLoggedIn","clickedLoggedOut","setClickedLoggedOut","fetch","then","res","json","e","console","log","anchorEl","setAnchorEl","mobileMoreAnchorEl","setMobileMoreAnchorEl","notificationAnchorEl","setNotificationAnchorEl","classes","isMenuOpen","isMobileMenuOpen","isNotificationMenuOpen","handleProfileMenuOpen","currentTarget","handleMobileMenuClose","handleNotificationMenuClose","handleMenuClose","id","handleMobileMenuOpen","handleNotificationMenuOpen","notifications","Array","isArray","notificationNumber","filter","visited","length","menuId","renderMenu","mobileMenuId","renderMobileMenu","notificationMenuId","renderNotificationMenu","grow","appBar","menuButton","title","appName","sectionDesktop","sectionMobile"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { AppBar, Toolbar, IconButton, Typography, Badge, Button } from '@material-ui/core/'\r\nimport { Menu as MenuIcon, AccountCircle, Notifications as NotificationsIcon, MoreVert as MoreIcon} from '@material-ui/icons';\r\nimport styleMaker from './headersStyleMaker'\r\nimport MenuTheme from './menuTheme'\r\nimport MobileMenu from './mobileMenu'\r\nimport DesktopMenu from './desktopMenu'\r\nimport NotificationMenu from './notificationMenu'\r\nimport Search from './search'\r\n\r\n\r\nconst useStyles = makeStyles(styleMaker);\r\n\r\nexport default function PrimarySearchAppBar() {\r\n  \r\n  \r\n  /**\r\n   * @TODO: the user data and headersMetadat should be retrieved through an API call. \r\n   * Eventually they should be brought to getStaticProps or getServerSideProps async functions\r\n   * for data fecthing. \r\n   */\r\n  const [userData, setUserData] = React.useState(null);\r\n  const [headersMetadata, setHeadersMetadata] = React.useState(null)\r\n  const [loggedIn, setLoggedIn] = React.useState(Boolean(userData))\r\n  const [clickedLoggedOut, setClickedLoggedOut] = React.useState(null)\r\n  // @TODO - Bring the data fetching to getStaticProps or getServerProps instead of hardcoding them here.\r\n  \r\n  !userData && !clickedLoggedOut ? fetch('/api/users?id=foo')\r\n    .then(res=>res.json())\r\n    .then(res => {\r\n      setUserData(res)\r\n      setLoggedIn(Boolean(res))\r\n    })\r\n    .catch(e=>console.log(e)) : ''\r\n  // @TODO - Delete it once real API is live and adapt code to retrieve information from the API\r\n  \r\n  !headersMetadata ? fetch('/api/loadHeadersMetadata')\r\n    .then(res=>res.json())\r\n    .then(res=> {\r\n      console.log(res)\r\n      setHeadersMetadata(res)\r\n    })\r\n    .catch(e=>console.log(e)) : ''\r\n\r\n  \r\n  const [anchorEl, setAnchorEl] = React.useState(null)\r\n  const [mobileMoreAnchorEl, setMobileMoreAnchorEl] = React.useState(null)\r\n  const [notificationAnchorEl, setNotificationAnchorEl] = React.useState(null)\r\n\r\n  \r\n  const classes = useStyles();\r\n  const isMenuOpen = Boolean(anchorEl);\r\n  const isMobileMenuOpen = Boolean(mobileMoreAnchorEl)\r\n  const isNotificationMenuOpen = Boolean(notificationAnchorEl)\r\n\r\n  const handleProfileMenuOpen = e => setAnchorEl(e.currentTarget)\r\n\r\n  const handleMobileMenuClose = () => setMobileMoreAnchorEl(null)\r\n  const handleNotificationMenuClose = () => setNotificationAnchorEl(null)\r\n  const handleMenuClose = e => {\r\n    \r\n    setAnchorEl(null)\r\n    handleMobileMenuClose()\r\n    handleNotificationMenuClose()\r\n\r\n    const {currentTarget:{id}} = e\r\n    \r\n    if(id === 'signout'){\r\n      console.log(id)\r\n      setClickedLoggedOut(true)\r\n      setUserData(null)\r\n      setLoggedIn(null)\r\n    }\r\n  };\r\n\r\n  const handleMobileMenuOpen = e => setMobileMoreAnchorEl(e.currentTarget)\r\n  const handleNotificationMenuOpen = e => setNotificationAnchorEl(e.currentTarget)\r\n\r\n\r\n  const notifications = userData ? Array.isArray(userData.notifications) ? userData.notifications : [] :[]\r\n  const notificationNumber = notifications ? notifications.filter(({visited})=>!visited).length:0\r\n\r\n  const menuId = 'account-menu';\r\n  const renderMenu = (\r\n    <DesktopMenu \r\n      anchorEl={anchorEl}\r\n      menuId={menuId}\r\n      isMenuOpen={isMenuOpen}\r\n      handleMenuClose={handleMenuClose}/>\r\n  );\r\n\r\n  const mobileMenuId = 'account-menu';\r\n  const renderMobileMenu = (\r\n    <MobileMenu \r\n      mobileMoreAnchorEl={mobileMoreAnchorEl}\r\n      mobileMenuId={mobileMenuId}\r\n      isMobileMenuOpen={isMobileMenuOpen}\r\n      handleMobileMenuClose={handleMobileMenuClose}\r\n      handleProfileMenuOpen={handleProfileMenuOpen}\r\n      notificationNumber={notificationNumber}\r\n      />\r\n  )\r\n  const notificationMenuId = 'notification-menu'\r\n  const renderNotificationMenu = (<NotificationMenu\r\n      anchorEl={notificationAnchorEl} \r\n      menuId={notificationMenuId}\r\n      isMenuOpen={isNotificationMenuOpen}\r\n      handleMenuClose={handleNotificationMenuClose}\r\n      userData={userData?userData:''}// Defaults it to an empty string.\r\n      setUserData={setUserData}\r\n    />)\r\n\r\n  return (\r\n    <div className={classes.grow}>\r\n      <AppBar position=\"static\" className={classes.appBar}>\r\n        <Toolbar>\r\n          <IconButton\r\n            edge=\"start\"\r\n            className={classes.menuButton}\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n          >\r\n            <MenuIcon />\r\n          </IconButton>\r\n          <Typography className={classes.title} variant=\"h6\" noWrap>\r\n            {headersMetadata?headersMetadata.appName?headersMetadata.appName:'calcompas':'calcompass'}\r\n          </Typography>\r\n          {loggedIn?<Search userData={userData?userData:''} classes={classes} /> :'' }\r\n          <div className={classes.grow} />\r\n          {loggedIn ? (\r\n          <div className={classes.sectionDesktop}>\r\n            <IconButton \r\n              aria-label={`show ${notificationNumber} new notifications`}\r\n              aria-controls={notificationMenuId}\r\n              aria-haspopup=\"true\"\r\n              variant=\"contained\"\r\n              onClick={handleNotificationMenuOpen}\r\n              color=\"inherit\">\r\n              <Badge badgeContent={notificationNumber} color=\"secondary\">\r\n                <NotificationsIcon />\r\n              </Badge>\r\n            </IconButton>\r\n            <IconButton\r\n              edge=\"end\"\r\n              aria-label=\"account of current user\"\r\n              aria-controls={menuId}\r\n              aria-haspopup=\"true\"\r\n              variant=\"contained\"\r\n              onClick={handleProfileMenuOpen}\r\n              color=\"inherit\"\r\n            >\r\n              <AccountCircle />\r\n            </IconButton>\r\n          </div>) :''}\r\n          {loggedIn? (\r\n          <div className={classes.sectionMobile}>\r\n            <IconButton\r\n              aria-label=\"show more\"\r\n              aria-controls={mobileMenuId}\r\n              aria-haspopup=\"true\"\r\n              onClick={handleMobileMenuOpen}\r\n              color=\"inherit\"\r\n            >\r\n              <MoreIcon />\r\n            </IconButton>\r\n          </div>): ''}\r\n          {!loggedIn ? <Button color='inherit' onClick={()=>setClickedLoggedOut(null)}>LOGIN</Button> : ''}\r\n        </Toolbar>\r\n      </AppBar>\r\n      {loggedIn ? \r\n      <MenuTheme>\r\n        {renderMobileMenu}\r\n        {renderMenu}\r\n        {renderNotificationMenu}\r\n      </MenuTheme>:\r\n      ''}     \r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}